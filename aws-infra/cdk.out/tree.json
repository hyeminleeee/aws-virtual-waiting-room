{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.212.0"},"children":{"KtxWaitingRoomStack":{"id":"KtxWaitingRoomStack","path":"KtxWaitingRoomStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"KtxWaitingRoomVPC":{"id":"KtxWaitingRoomVPC","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.6.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC"}]}}},"PublicSubnetSubnet1":{"id":"PublicSubnetSubnet1","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-northeast-2a","cidrBlock":"10.6.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"Acl":{"id":"Acl","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1RouteTable033E2F7F"},"subnetId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1Subnet8A07EA58"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"KtxWaitingRoomVPCIGW87C790E6"},"routeTableId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1RouteTable033E2F7F"}}}},"EIP":{"id":"EIP","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["KtxWaitingRoomVPCPublicSubnetSubnet1EIPF31C4DD2","AllocationId"]},"subnetId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1Subnet8A07EA58"},"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet1"}]}}}}},"PublicSubnetSubnet2":{"id":"PublicSubnetSubnet2","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-northeast-2b","cidrBlock":"10.6.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"Acl":{"id":"Acl","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet2RouteTableB974B7A9"},"subnetId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet2Subnet5A631BB5"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PublicSubnetSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"KtxWaitingRoomVPCIGW87C790E6"},"routeTableId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet2RouteTableB974B7A9"}}}}}},"PrivateSubnetSubnet1":{"id":"PrivateSubnetSubnet1","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-northeast-2a","cidrBlock":"10.6.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"Acl":{"id":"Acl","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1RouteTable6BE1C16E"},"subnetId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1SubnetDCDEB157"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1NATGateway18DE3597"},"routeTableId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1RouteTable6BE1C16E"}}}}}},"PrivateSubnetSubnet2":{"id":"PrivateSubnetSubnet2","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.212.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-northeast-2b","cidrBlock":"10.6.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateSubnet"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"Acl":{"id":"Acl","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2RouteTable388E54B9"},"subnetId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2Subnet4484975B"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/PrivateSubnetSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1NATGateway18DE3597"},"routeTableId":{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2RouteTable388E54B9"}}}}}},"IGW":{"id":"IGW","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"KtxWaitingRoomStack/KtxWaitingRoomVPC"}]}}},"VPCGW":{"id":"VPCGW","path":"KtxWaitingRoomStack/KtxWaitingRoomVPC/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"KtxWaitingRoomVPCIGW87C790E6"},"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}}}},"BackendRepo":{"id":"BackendRepo","path":"KtxWaitingRoomStack/BackendRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"ktx-waiting-room-backend"}}}}},"FrontendRepo":{"id":"FrontendRepo","path":"KtxWaitingRoomStack/FrontendRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"ktx-waiting-room-frontend"}}}}},"RedisSubnetGroup":{"id":"RedisSubnetGroup","path":"KtxWaitingRoomStack/RedisSubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticache.CfnSubnetGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElastiCache::SubnetGroup","aws:cdk:cloudformation:props":{"description":"Subnet group for Redis cluster","subnetIds":[{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1SubnetDCDEB157"},{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2Subnet4484975B"}]}}},"RedisSecurityGroup":{"id":"RedisSecurityGroup","path":"KtxWaitingRoomStack/RedisSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/RedisSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Redis cluster","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"from KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:6379":{"id":"from KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:6379","path":"KtxWaitingRoomStack/RedisSecurityGroup/from KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:6379","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow backend to access Redis","fromPort":6379,"groupId":{"Fn::GetAtt":["RedisSecurityGroupB05951F6","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["BackendServiceSecurityGroup0865F57D","GroupId"]},"toPort":6379}}}}},"RedisCluster":{"id":"RedisCluster","path":"KtxWaitingRoomStack/RedisCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticache.CfnCacheCluster","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElastiCache::CacheCluster","aws:cdk:cloudformation:props":{"cacheNodeType":"cache.t3.micro","cacheSubnetGroupName":{"Ref":"RedisSubnetGroup"},"engine":"redis","numCacheNodes":1,"port":6379,"vpcSecurityGroupIds":[{"Fn::GetAtt":["RedisSecurityGroupB05951F6","GroupId"]}]}}},"KtxWaitingRoomCluster":{"id":"KtxWaitingRoomCluster","path":"KtxWaitingRoomStack/KtxWaitingRoomCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"ktx-waiting-room-cluster"}}}}},"BackendLogGroup":{"id":"BackendLogGroup","path":"KtxWaitingRoomStack/BackendLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/ktx-waiting-room-backend","retentionInDays":7}}}}},"FrontendLogGroup":{"id":"FrontendLogGroup","path":"KtxWaitingRoomStack/FrontendLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/ktx-waiting-room-frontend","retentionInDays":7}}}}},"BackendTaskDef":{"id":"BackendTaskDef","path":"KtxWaitingRoomStack/BackendTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.212.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"KtxWaitingRoomStack/BackendTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"KtxWaitingRoomStack/BackendTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"KtxWaitingRoomStack/BackendTaskDef/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTaskDef/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ssmmessages:CreateControlChannel","ssmmessages:CreateDataChannel","ssmmessages:OpenControlChannel","ssmmessages:OpenDataChannel"],"Effect":"Allow","Resource":"*"},{"Action":"logs:DescribeLogGroups","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:DescribeLogStreams","logs:PutLogEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BackendTaskDefTaskRoleDefaultPolicy2C657A56","roles":[{"Ref":"BackendTaskDefTaskRoleBA953A3B"}]}}}}}}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["BackendRepo7FFBAD06","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["BackendRepo7FFBAD06","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"BackendRepo7FFBAD06"},":latest"]]},"name":"BackendContainer","portMappings":[{"containerPort":3000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"BackendLogGroupDA10F1B2"},"awslogs-stream-prefix":"backend","awslogs-region":"ap-northeast-2"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"3000"},{"name":"REDIS_URL","value":{"Fn::Join":["",["redis://",{"Fn::GetAtt":["RedisCluster","RedisEndpoint.Address"]},":",{"Fn::GetAtt":["RedisCluster","RedisEndpoint.Port"]}]]}},{"name":"MAX_CONCURRENT_USERS","value":"20"},{"name":"SESSION_DURATION","value":"15000"},{"name":"JWT_SECRET","value":"production-jwt-secret-change-this"}],"healthCheck":{"command":["CMD-SHELL","wget --no-verbose --tries=1 --spider http://localhost:3000/health || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["BackendTaskDefExecutionRoleC5A001DB","Arn"]},"family":"KtxWaitingRoomStackBackendTaskDefC9C6CA21","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["BackendTaskDefTaskRoleBA953A3B","Arn"]}}}},"BackendContainer":{"id":"BackendContainer","path":"KtxWaitingRoomStack/BackendTaskDef/BackendContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.212.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"KtxWaitingRoomStack/BackendTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"KtxWaitingRoomStack/BackendTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"KtxWaitingRoomStack/BackendTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["BackendRepo7FFBAD06","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["BackendLogGroupDA10F1B2","Arn"]}}],"Version":"2012-10-17"},"policyName":"BackendTaskDefExecutionRoleDefaultPolicyAA625660","roles":[{"Ref":"BackendTaskDefExecutionRoleC5A001DB"}]}}}}}}}}},"FrontendTaskDef":{"id":"FrontendTaskDef","path":"KtxWaitingRoomStack/FrontendTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.212.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"KtxWaitingRoomStack/FrontendTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"KtxWaitingRoomStack/FrontendTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["FrontendRepoF80FCC01","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["FrontendRepoF80FCC01","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"FrontendRepoF80FCC01"},":latest"]]},"name":"FrontendContainer","portMappings":[{"containerPort":80,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"FrontendLogGroupCE4F14E0"},"awslogs-stream-prefix":"frontend","awslogs-region":"ap-northeast-2"}}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["FrontendTaskDefExecutionRoleE7329A09","Arn"]},"family":"KtxWaitingRoomStackFrontendTaskDefD0237824","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["FrontendTaskDefTaskRoleDA0FD037","Arn"]}}}},"FrontendContainer":{"id":"FrontendContainer","path":"KtxWaitingRoomStack/FrontendTaskDef/FrontendContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.212.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"KtxWaitingRoomStack/FrontendTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"KtxWaitingRoomStack/FrontendTaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"KtxWaitingRoomStack/FrontendTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FrontendRepoF80FCC01","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FrontendLogGroupCE4F14E0","Arn"]}}],"Version":"2012-10-17"},"policyName":"FrontendTaskDefExecutionRoleDefaultPolicy48DF7F3B","roles":[{"Ref":"FrontendTaskDefExecutionRoleE7329A09"}]}}}}}}}}},"KtxWaitingRoomALB":{"id":"KtxWaitingRoomALB","path":"KtxWaitingRoomStack/KtxWaitingRoomALB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"name":"ktx-waiting-room-alb","scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["KtxWaitingRoomALBSecurityGroup6E652079","GroupId"]}],"subnets":[{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet1Subnet8A07EA58"},{"Ref":"KtxWaitingRoomVPCPublicSubnetSubnet2Subnet5A631BB5"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB KtxWaitingRoomStackKtxWaitingRoomALB65FE17DD","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"to KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:3000":{"id":"to KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:3000","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/SecurityGroup/to KtxWaitingRoomStackBackendServiceSecurityGroup7FE2F870:3000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["BackendServiceSecurityGroup0865F57D","GroupId"]},"fromPort":3000,"groupId":{"Fn::GetAtt":["KtxWaitingRoomALBSecurityGroup6E652079","GroupId"]},"ipProtocol":"tcp","toPort":3000}}},"to KtxWaitingRoomStackFrontendServiceSecurityGroup431D6B5D:80":{"id":"to KtxWaitingRoomStackFrontendServiceSecurityGroup431D6B5D:80","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/SecurityGroup/to KtxWaitingRoomStackFrontendServiceSecurityGroup431D6B5D:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["FrontendServiceSecurityGroup85470DEC","GroupId"]},"fromPort":80,"groupId":{"Fn::GetAtt":["KtxWaitingRoomALBSecurityGroup6E652079","GroupId"]},"ipProtocol":"tcp","toPort":80}}}}},"PublicListener":{"id":"PublicListener","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"FrontendTargetGroupED7B3E5D"}}],"loadBalancerArn":{"Ref":"KtxWaitingRoomALB93DBCB0C"},"port":80,"protocol":"HTTP"}}},"ApiRoutingRule":{"id":"ApiRoutingRule","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/PublicListener/ApiRoutingRule","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListenerRule","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/KtxWaitingRoomALB/PublicListener/ApiRoutingRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListenerRule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::ListenerRule","aws:cdk:cloudformation:props":{"actions":[{"type":"forward","targetGroupArn":{"Ref":"BackendTargetGroupECF98930"}}],"conditions":[{"field":"path-pattern","pathPatternConfig":{"values":["/api/*","/health"]}}],"listenerArn":{"Ref":"KtxWaitingRoomALBPublicListenerC2AB1A42"},"priority":100}}}}}}}}},"BackendService":{"id":"BackendService","path":"KtxWaitingRoomStack/BackendService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.212.0","metadata":[]},"children":{"Service":{"id":"Service","path":"KtxWaitingRoomStack/BackendService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"KtxWaitingRoomCluster413FDA7A"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":2,"enableEcsManagedTags":false,"enableExecuteCommand":true,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"BackendTargetGroupECF98930"},"containerName":"BackendContainer","containerPort":3000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1SubnetDCDEB157"},{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2Subnet4484975B"}],"securityGroups":[{"Fn::GetAtt":["BackendServiceSecurityGroup0865F57D","GroupId"]}]}},"serviceName":"ktx-backend-service","taskDefinition":{"Ref":"BackendTaskDef6ECE986E"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"KtxWaitingRoomStack/BackendService/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendService/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"KtxWaitingRoomStack/BackendService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:3000":{"id":"from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:3000","path":"KtxWaitingRoomStack/BackendService/SecurityGroup/from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:3000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":3000,"groupId":{"Fn::GetAtt":["BackendServiceSecurityGroup0865F57D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["KtxWaitingRoomALBSecurityGroup6E652079","GroupId"]},"toPort":3000}}}}},"ScalingRole":{"id":"ScalingRole","path":"KtxWaitingRoomStack/BackendService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"KtxWaitingRoomStack/BackendService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.212.0"},"children":{"Target":{"id":"Target","path":"KtxWaitingRoomStack/BackendService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":10,"minCapacity":1,"resourceId":{"Fn::Join":["",["service/",{"Ref":"KtxWaitingRoomCluster413FDA7A"},"/",{"Fn::GetAtt":["BackendService7A4224EE","Name"]}]]},"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::077672914621:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"]]},"scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"BackendCpuScaling":{"id":"BackendCpuScaling","path":"KtxWaitingRoomStack/BackendService/TaskCount/Target/BackendCpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendService/TaskCount/Target/BackendCpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"KtxWaitingRoomStackBackendServiceTaskCountTargetBackendCpuScaling84DAC519","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"BackendServiceTaskCountTarget0CA57D80"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":300,"scaleOutCooldown":300,"targetValue":70}}}}}}}}}}}},"FrontendService":{"id":"FrontendService","path":"KtxWaitingRoomStack/FrontendService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.212.0","metadata":[]},"children":{"Service":{"id":"Service","path":"KtxWaitingRoomStack/FrontendService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"KtxWaitingRoomCluster413FDA7A"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":2,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"FrontendTargetGroupED7B3E5D"},"containerName":"FrontendContainer","containerPort":80}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet1SubnetDCDEB157"},{"Ref":"KtxWaitingRoomVPCPrivateSubnetSubnet2Subnet4484975B"}],"securityGroups":[{"Fn::GetAtt":["FrontendServiceSecurityGroup85470DEC","GroupId"]}]}},"serviceName":"ktx-frontend-service","taskDefinition":{"Ref":"FrontendTaskDef7D3FD156"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"KtxWaitingRoomStack/FrontendService/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendService/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"KtxWaitingRoomStack/FrontendService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}},"from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:80":{"id":"from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:80","path":"KtxWaitingRoomStack/FrontendService/SecurityGroup/from KtxWaitingRoomStackKtxWaitingRoomALBSecurityGroup0C61C46D:80","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":80,"groupId":{"Fn::GetAtt":["FrontendServiceSecurityGroup85470DEC","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["KtxWaitingRoomALBSecurityGroup6E652079","GroupId"]},"toPort":80}}}}},"ScalingRole":{"id":"ScalingRole","path":"KtxWaitingRoomStack/FrontendService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"KtxWaitingRoomStack/FrontendService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.212.0"},"children":{"Target":{"id":"Target","path":"KtxWaitingRoomStack/FrontendService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":5,"minCapacity":1,"resourceId":{"Fn::Join":["",["service/",{"Ref":"KtxWaitingRoomCluster413FDA7A"},"/",{"Fn::GetAtt":["FrontendServiceBC94BA93","Name"]}]]},"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::077672914621:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"]]},"scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"FrontendCpuScaling":{"id":"FrontendCpuScaling","path":"KtxWaitingRoomStack/FrontendService/TaskCount/Target/FrontendCpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendService/TaskCount/Target/FrontendCpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"KtxWaitingRoomStackFrontendServiceTaskCountTargetFrontendCpuScalingC9825465","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"FrontendServiceTaskCountTarget125583E9"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":300,"scaleOutCooldown":300,"targetValue":70}}}}}}}}}}}},"BackendTargetGroup":{"id":"BackendTargetGroup","path":"KtxWaitingRoomStack/BackendTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/BackendTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"matcher":{"httpCode":"200"},"port":3000,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}}}},"FrontendTargetGroup":{"id":"FrontendTargetGroup","path":"KtxWaitingRoomStack/FrontendTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.212.0"},"children":{"Resource":{"id":"Resource","path":"KtxWaitingRoomStack/FrontendTargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/","healthCheckTimeoutSeconds":5,"matcher":{"httpCode":"200"},"port":80,"protocol":"HTTP","targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":{"Ref":"KtxWaitingRoomVPC8B8DBE0C"}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"KtxWaitingRoomStack/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"BackendECRRepository":{"id":"BackendECRRepository","path":"KtxWaitingRoomStack/BackendECRRepository","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"FrontendECRRepository":{"id":"FrontendECRRepository","path":"KtxWaitingRoomStack/FrontendECRRepository","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"RedisEndpoint":{"id":"RedisEndpoint","path":"KtxWaitingRoomStack/RedisEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"WebsiteURL":{"id":"WebsiteURL","path":"KtxWaitingRoomStack/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"ApiURL":{"id":"ApiURL","path":"KtxWaitingRoomStack/ApiURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"KtxWaitingRoomStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"KtxWaitingRoomStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"KtxWaitingRoomStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"KtxWaitingRoomStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}